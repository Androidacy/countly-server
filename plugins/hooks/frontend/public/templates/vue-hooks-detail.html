<script type="text/x-template" id="hooks-detail-view">
<div v-bind:class="[componentId]">
   <cly-header v-if="hookDetail">
      <cly-back-link slot="header-top" :title="i18n('hooks.back-to-hooks')" link="/manage/hooks"></cly-back-link>
      <template v-slot:header-left class="bu-pt-2">
        <div>
          <h3>{{hookDetail.name}}</h3>
          <div class="bu-mt-4">
            <i class="text-medium el-icon-time"></i> <span class="text-medium	color-cool-gray-50">Created at {{hookDetail.created_at_string}} by {{hookDetail.createdByUser}}</span>
         
          </div>
        </div>
      </template>
      <template v-slot:header-right>
        <div>
          <div class="is-option-button">
            <cly-more-options size="small" @command="handleHookEditCommand($event, hookDetail)">
               <el-dropdown-item  icon="el-icon-document-copy" command="edit-comment">
                   Edit
               </el-dropdown-item>
               <el-dropdown-item icon="el-icon-delete" command="delete-comment">
                   Delete
               </el-dropdown-item>
           </cly-more-options>
         </div>
        </div>
      </template>
    </cly-header>
    <cly-main>
      <div class="hook-detail-card">
        <div class="bu-mx-5 white-bg bu-my-4  bu-pt-1  bu-pb-4 ">
          <div class="text-medium color-cool-gray-100 text-heading">{{i18n('hooks.detail-title')}}</div>
          <div class="bu-mt-5">
            <div class="bu-columns">
              <div  class="bu-column bu-pb-1 bu-is-2 text-medium bu-has-text-weight-medium">{{i18n('hooks.trigger-count')}}</div>
              <div class="bu-column bu-pb-1 ">{{hookDetail.triggerCount}}</div>
            </div>
            <div class="bu-columns">
              <div  class="bu-column bu-pb-1 bu-is-2 text-medium bu-has-text-weight-medium">{{i18n('hooks.trigger-time')}}</div>
              <div class="bu-column bu-pb-1 ">{{hookDetail.lastTriggerTimestampString}}</div>
            </div>
            <div class="bu-columns cly-vue-hook-table">
              <div  class="bu-column bu-pb-1  bu-is-2 text-medium bu-has-text-weight-medium">{{i18n('hooks.trigger-and-effect')}}</div>
              <div class="bu-column bu-pb-1 " v-html="hookDetail.triggerEffectDom"></div>
            </div>
          </div>
        </div>
      </div>

      <div class="text-medium bu-my-4 bu-has-text-weight-medium color-cool-gray-100"> Last 10 Failed Triggers</div>
      <cly-section>
        <error-table-view ></error-table-view>
      </cly-section>
      <drawer @close="closeDrawer" :controls="drawers.detail"></drawer>
      <cly-confirm-dialog 
        @cancel="closeDeleteForm" 
        @confirm="submitDeleteForm" 
        :before-close="closeDeleteForm" 
        ref="deleteConfirmDialog" 
        :visible.sync="showDeleteDialog" 
        dialogType="danger" 
        :saveButtonLabel="i18n('common.delete')" 
        :cancelButtonLabel="i18n('common.no-dont-delete')" 
        :title="i18n('hooks.delete-confirm-title')" >
            <template slot-scope="scope">
                <div v-html="deleteMessage"></div>
            </template>
    </cly-confirm-dialog>
    </cly-main>
</div>
</script>   