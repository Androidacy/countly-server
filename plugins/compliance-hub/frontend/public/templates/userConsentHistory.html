<cly-main>
    <cly-section>
        <cly-datatable-n :data-source="userConsentHistoryTableSource" :default-sort="{prop: 'ts', order: 'descending'}">
            <template v-slot="scope">
                <el-table-column fixed type="expand">
                    <template slot-scope="props">
                        <div class="bu-level cly-vue-compliance__consent_history_expanded_column">
                            <div class="bu-level-left text-medium font-weight-bold">Device ID</div>
                            <div style="width: 80%;" class="bu-level-right">
                                <p style="width: 100%;">{{props.row.device_id}}</p>
                            </div>
                        </div>
                        <div v-if="props.row.optin.length > 0"
                            class="bu-level cly-vue-compliance__consent_history_expanded_column">
                            <div class="bu-level-left text-medium font-weight-bold">{{i18n("consent.opt-i")}}</div>
                            <div style="width: 80%;" class="bu-level-right">
                                <p style="width: 100%;">
                                    {{props.row.optin.join(',')}}
                                </p>
                            </div>
                        </div>
                        <div v-if="props.row.optout.length > 0"
                            class="bu-level cly-vue-compliance__consent_history_expanded_column">
                            <div class="bu-level-left text-medium font-weight-bold">{{i18n("consent.opt-o")}}</div>
                            <div style="width: 80%;" class="bu-level-right">
                                <p style="width: 100%;">
                                    {{props.row.optout.join(',')}}
                                </p>
                            </div>
                        </div>
                        <div class="bu-level cly-vue-compliance__consent_history_expanded_column">
                            <div class="bu-level-left text-medium font-weight-bold">Device</div>
                            <div style="width: 80%;" class="bu-level-right">
                                <p style="width: 100%;">
                                    {{props.row.d + "(" + props.row.p + " " + props.row.pv + ")"}}
                                </p>
                            </div>
                        </div>
                        <div class="bu-level cly-vue-compliance__consent_history_expanded_column">
                            <div class="bu-level-left text-medium font-weight-bold">App version</div>
                            <div style="width: 80%;" class="bu-level-right">
                                <p style="width: 100%;">
                                    {{props.row.av}}
                                </p>
                            </div>
                        </div>
                    </template>
                </el-table-column>
                <el-table-column fixed width="250" sortable="custom" prop="_id" label="ID">
                </el-table-column>
                <el-table-column sortable="custom" prop="uid" label="UID">
                </el-table-column>
                <el-table-column sortable="custom" width="220px" label="CHANGES">
                    <template v-slot="rowScope">
                        <div>
                            <p v-if="rowScope.row.type.includes('i')">{{i18n("consent.opt-i")}}</p>
                            <p v-if="rowScope.row.type.includes('o')">{{i18n("consent.opt-o")}} </p>
                        </div>

                    </template>

                </el-table-column>
                <el-table-column width="250" sortable="custom" label="CONSENT">
                    <template v-slot="rowScope">
                        <div>
                            <p v-if="rowScope.row.optin.length > 0">{{i18n("consent.opt-i")}} for {{rowScope.row.optin.length}} feature(s)
                            </p>
                            <p v-if="rowScope.row.optout.length > 0">{{i18n("consent.opt-o")}} from {{rowScope.row.optout.length}}
                                feature(s)</p>
                        </div>

                    </template>

                </el-table-column>
                <el-table-column width="165" sortable="custom" prop="av" label="APP VERSION">
                </el-table-column>
                <el-table-column width="230" sortable="custom" prop="ts" label="TIME">
                    <template v-slot="rowScope">
                        {{rowScope.row.time}}

                    </template>
                </el-table-column>
            </template>
        </cly-datatable-n>

    </cly-section>
</cly-main>